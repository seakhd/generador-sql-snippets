        <!-- Header y Pestañas -->
        <div class="text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-cyan-400">Herramienta de Snippets SQL</h1>
            <div class="mt-4 border-b border-gray-700">
                <nav class="-mb-px flex justify-center space-x-4" aria-label="Tabs">
                    <!-- Pestaña de IA OCULTA -->
                    <button id="tab-ia" class="tab-btn whitespace-nowrap py-3 px-4 border-b-2 border-transparent font-medium text-lg text-gray-400 hover:text-white hover:border-gray-300 hidden">
                        Generador Asistido por IA
                    </button>
                    <!-- Pestaña Manual ACTIVA por defecto -->
                    <button id="tab-manual" class="tab-btn active whitespace-nowrap py-3 px-4 border-b-2 border-transparent font-medium text-lg text-gray-400 hover:text-white hover:border-gray-300">
                        Empaquetador Manual
                    </button>
                </nav>
            </div>
        </div>

        <!-- Vista del Generador con IA OCULTA -->
        <div id="view-ia" class="hidden">
            <div class="space-y-6">
                <!-- Contenido -->
                <div class="bg-gray-900/50 p-6 rounded-xl border border-gray-700">
                    <h2 class="text-xl font-semibold text-gray-300 mb-4">1. Petición de Consulta</h2>
                     <label for="plain-text-input-ia" class="block text-sm font-medium text-gray-400 mb-2">Escribe en lenguaje natural lo que necesitas y la IA generará el script SQL.</label>
                    <textarea id="plain-text-input-ia" rows="6" class="form-textarea h-full" placeholder="Ej: 'Selecciona los 5 pacientes más recientes de la tabla Pac_Paciente'"></textarea>
                </div>
                <!-- Botón -->
                <div class="text-center pt-4">
                    <button id="generate-btn-ia" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform hover:scale-105 transition-all flex items-center justify-center mx-auto">
                        <svg id="loader-ia" class="loader w-5 h-5 mr-3 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.75V6.25m0 11.5v1.5m8.25-8.25H18M4.25 12H6m12.55-6.34l-1.06 1.06M7.81 16.19l-1.06 1.06M17.25 6.75l-1.06-1.06M7.81 7.81l-1.06-1.06" /></svg>
                        <span id="generate-btn-text-ia">Generar Script SQL</span>
                    </button>
                </div>
                <!-- Salida -->
                <div id="output-container-ia" class="hidden space-y-4 pt-6">
                    <div class="flex flex-wrap justify-between items-center gap-4">
                        <h2 class="text-xl font-semibold text-gray-300">2. Resultado (Script SQL)</h2>
                        <div class="flex gap-2 items-center">
                             <input type="text" id="sql-filename-ia" class="form-input text-sm" placeholder="nombre_del_fichero.sql">
                            <button id="copy-btn-ia" class="bg-gray-600 hover:bg-gray-500 text-gray-200 font-semibold py-2 px-4 rounded-lg flex items-center">Copiar</button>
                            <button id="download-btn-ia" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center transition-colors">Descargar .sql</button>
                        </div>
                    </div>
                    <pre class="p-4 overflow-x-auto bg-gray-900 rounded-lg border border-gray-700"><code id="sql-output-ia" class="code-block text-cyan-300"></code></pre>
                    <div id="feedback-ia" class="text-center font-medium h-4"></div>
                </div>
            </div>
        </div>

        <!-- Vista del Empaquetador Manual VISIBLE -->
        <div id="view-manual">
            <div class="space-y-6">
                 <!-- Metadata -->
                <div class="bg-gray-900/50 p-6 rounded-xl border border-gray-700">
                    <h2 class="text-xl font-semibold text-gray-300 mb-4">1. Metadatos del Snippet</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="snippet-title-manual" class="block text-sm font-medium text-gray-400 mb-1">Título</label>
                            <input type="text" id="snippet-title-manual" class="form-input" placeholder="Ej: Insertar nuevo paciente">
                        </div>
                        <div>
                            <label for="snippet-shortcut-manual" class="block text-sm font-medium text-gray-400 mb-1">Atajo (Shortcut)</label>
                            <input type="text" id="snippet-shortcut-manual" class="form-input" placeholder="Ej: inspac">
                        </div>
                        <div class="md:col-span-2">
                            <label for="snippet-description-manual" class="block text-sm font-medium text-gray-400 mb-1">Descripción</label>
                            <input type="text" id="snippet-description-manual" class="form-input" placeholder="Ej: Snippet para un nuevo registro en la tabla Pacientes">
                        </div>
                        <div>
                            <label for="snippet-author-manual" class="block text-sm font-medium text-gray-400 mb-1">Autor</label>
                            <input type="text" id="snippet-author-manual" class="form-input" placeholder="Tu nombre o alias">
                        </div>
                        <div>
                            <label for="snippet-type-manual" class="block text-sm font-medium text-gray-400 mb-1">Tipo de Snippet</label>
                            <select id="snippet-type-manual" class="form-select">
                                <option>Expansion</option>
                                <option>SurroundsWith</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- Contenido -->
                <div class="bg-gray-900/50 p-6 rounded-xl border border-gray-700">
                    <h2 class="text-xl font-semibold text-gray-300 mb-4">2. Script SQL</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label for="plain-text-input-manual" class="block text-sm font-medium text-gray-400">Pega aquí tu script final:</label>
                            <textarea id="plain-text-input-manual" rows="8" class="form-textarea h-full code-block" placeholder="SELECT * FROM dbo.Pac_Paciente WHERE FechaAlta > '2023-01-01';"></textarea>
                        </div>
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-400">O sube un archivo .SQL:</label>
                            <div id="file-drop-area-manual" class="flex flex-col items-center justify-center w-full h-full border-2 border-dashed border-gray-600 rounded-lg p-4 cursor-pointer hover:bg-gray-700/50 hover:border-cyan-500 transition">
                                <svg class="w-10 h-10 mb-3 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>
                                <p id="file-info-manual" class="mb-2 text-sm text-gray-400 text-center"><span class="font-semibold">Haz clic para subir</span> o arrastra</p>
                                <input type="file" id="sql-file-input-manual" class="hidden" accept=".sql">
                            </div>
                            <button id="clear-file-btn-manual" class="hidden w-full mt-2 text-sm text-red-400 hover:text-red-300">Quitar archivo</button>
                        </div>
                    </div>
                </div>
                <!-- Botón -->
                <div class="text-center pt-4">
                    <button id="generate-btn-manual" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform hover:scale-105 transition-all flex items-center justify-center mx-auto">
                        Crear Snippet
                    </button>
                </div>
                <!-- Salida -->
                <div id="output-container-manual" class="hidden space-y-4 pt-6">
                    <div class="flex flex-wrap justify-between items-center gap-4">
                        <h2 class="text-xl font-semibold text-gray-300">3. Resultado (.snippet XML)</h2>
                        <div class="flex gap-2">
                            <button id="copy-btn-manual" class="bg-gray-600 hover:bg-gray-500 text-gray-200 font-semibold py-2 px-4 rounded-lg flex items-center">Copiar</button>
                            <button id="download-btn-manual" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center transition-colors">Descargar Fichero</button>
                        </div>
                    </div>
                    <pre class="p-4 overflow-x-auto bg-gray-900 rounded-lg border border-gray-700"><code id="sql-output-manual" class="code-block text-cyan-300"></code></pre>
                    <div id="feedback-manual" class="text-center font-medium h-4"></div>
                </div>
            </div>
        </div>
